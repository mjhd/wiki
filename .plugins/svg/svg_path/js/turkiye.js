window.onload=function(){function m(){var d=n.value,c=r.value,e=1E3*+t.value,h="0"==c?0:1E3*+u.value,b;if(+v.value){do b=Math.floor(81*Math.random())+1;while(b==k)}else b=k+1,b=81<b?1:b;k=b;var f=p[b];b=("0"+b).slice(-2);var a="",g="";switch(d){case "I":case "HI":a=f;break;case "K":case "HK":a=b;break;case "IK":case "HIK":a=b+" - "+f}switch(c){case "I":case "HI":g=f;break;case "K":case "HK":g=b;break;case "IK":case "HIK":g=b+" - "+f}w.text(a).transition().delay(e).text(g).transition().delay(e+h).duration(400).text("");
f=c=d3.hsl(360*Math.random(),.5+.4*Math.random(),.4+.3*Math.random());-1==d.indexOf("H")&&(c="#CCC");d3.select("#p"+b).attr("fill",c).transition().delay(e).attr("fill",f).transition().delay(e+h).duration(200).attr("fill","#CCC");setTimeout(m,e+h+400)}var p=[],k=0,v=document.getElementById("sira"),n=document.getElementById("gor1"),r=document.getElementById("gor2"),t=document.getElementById("sure1"),u=document.getElementById("sure2");n.value="HIK";var d=d3.select("#svg"),a=parseInt(d.style("width"),
10),q=parseInt(d.style("height"),10),w=d.append("text").attr("class","font36").attr("x",a/2).attr("y",q-32).text("T\u00fcrkiye"),a=d3.geo.mercator().scale(2800).center([35.243,39.026]).translate([a/2,q/2-32]),l=d3.geo.path().projection(a);d3.json("/js/turkiye.json",function(a,c){if(a)return console.error(a);var e=topojson.feature(c,c.objects.il);d.append("path").datum(e).attr("d",l).style("stroke","#111").style("stroke-width","4px").style("stroke-linejoin","round");d.selectAll(".il").data(e.features).enter().append("path").attr("id",
function(a){return"p"+a.properties.kod}).attr("test",function(a){p[+a.properties.kod]=a.properties.ad}).attr("fill","#CCC").attr("d",l);d.append("path").datum(topojson.mesh(c,c.objects.il,function(a,b){return a!==b})).attr("d",l).attr("fill","none").style("stroke","#FFF").style("stroke-width","2px").style("stroke-linejoin","round");m()})};
